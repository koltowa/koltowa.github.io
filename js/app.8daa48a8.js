(function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],l=0,d=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);m&&m(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var m=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"222d":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],o=(n("034f"),n("2877")),i={},c=Object(o["a"])(i,a,s,!1,null,null,null),u=c.exports,m=n("8c4f"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Login")],1)},d=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[e.hiddenReg?n("div",[n("div",{staticClass:"login-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"username",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("br"),n("button",{on:{click:e.loginData}},[e._v("Log in")]),n("br")]),n("div",{staticClass:"a-anim"},[n("p",[e._v("new here"),n("span",{staticStyle:{"background-color":"rgba(92, 146, 255, 0.8)","font-weight":"bold"}},[e._v("?")]),e._v("#%^! "),n("a",{on:{click:function(t){e.hiddenReg=!1}}},[e._v(" Sign up")])])])]):e._e(),e.hiddenReg?e._e():n("div",[n("div",{staticClass:"login"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"username",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],attrs:{type:"password",placeholder:"confirm it",required:""},domProps:{value:e.confirmPassword},on:{input:function(t){t.target.composing||(e.confirmPassword=t.target.value)}}}),n("br"),n("button",{on:{click:e.register}},[e._v("Register")]),n("br")]),n("div",{staticClass:"a-anim"},[n("p",[e._v("have an account#@"),n("span",{staticStyle:{"background-color":"rgba(92, 146, 255, 0.8)","font-weight":"bold"}},[e._v("!")]),e._v("& "),n("a",{on:{click:function(t){e.hiddenReg=!0}}},[e._v(" Log in")])])])])])},v=[],h=n("1da1"),g=n("8785"),f=(n("96cf"),n("5184")),w=n("5530"),b=n("522d"),_=n("efe7");r["a"].use(b["a"]);var O,x,C,j="apollo-token",y=Object({NODE_ENV:"production",VUE_APP_APOLLO_ENGINE_KEY:"yes",VUE_APP_APOLLO_ENGINE_SERVICE:"n",VUE_APP_APOLLO_ENGINE_TAG:"",BASE_URL:"/"}).VUE_APP_GRAPHQL_HTTP||"https://webprogbase-lab6-graphql.herokuapp.com/",R={httpEndpoint:y,wsEndpoint:Object({NODE_ENV:"production",VUE_APP_APOLLO_ENGINE_KEY:"yes",VUE_APP_APOLLO_ENGINE_SERVICE:"n",VUE_APP_APOLLO_ENGINE_TAG:"",BASE_URL:"/"}).VUE_APP_GRAPHQL_WS||"wss://webprogbase-lab6-graphql.herokuapp.com/graphql",tokenName:j,persisting:!1,websocketsOnly:!1,ssr:!1};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(_["createApolloClient"])(Object(w["a"])(Object(w["a"])({},R),e)),n=t.apolloClient,r=t.wsClient;n.wsClient=r;var a=new b["a"]({defaultClient:n,defaultOptions:{$query:{}},errorHandler:function(e){console.log("%cError","background: red; color: white; padding: 2px 4px; border-radius: 3px; font-weight: bold;",e.message)}});return a}function P(e,t){return $.apply(this,arguments)}function $(){return $=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"undefined"!==typeof localStorage&&n&&localStorage.setItem(j,n),t.wsClient&&Object(_["restartWebsockets"])(t.wsClient),e.prev=2,e.next=5,t.resetStore();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),console.log("%cError on cache reset (login)","color: orange;",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),$.apply(this,arguments)}function E(e){return N.apply(this,arguments)}function N(){return N=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"undefined"!==typeof localStorage&&localStorage.removeItem(j),t.wsClient&&Object(_["restartWebsockets"])(t.wsClient),e.prev=2,e.next=5,t.resetStore();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),console.log("%cError on cache reset (logout)","color: orange;",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),N.apply(this,arguments)}var S,q,I,L,M,A,U,H,D,T,V,G,J,W,B=Object(f["a"])(O||(O=Object(g["a"])(["query login($username:String!,$password:String!) {\n  login(username: $username, password: $password)\n}"]))),K=Object(f["a"])(x||(x=Object(g["a"])(["query registration($username:String!,$password:String!) {\n  register(username: $username, password: $password) {\n    id\n    username\n    timestamp\n  }\n}"]))),Q=Object(f["a"])(C||(C=Object(g["a"])(["query checkUsername($username:String!) {\n  user: usernameExists(username: $username)\n}"]))),Y={data:function(){return{username:"",password:"",confirmPassword:"",hiddenReg:!0}},name:"Autofication",methods:{loginData:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getToken();case 2:return n=t.sent,P(e.$apollo.provider.defaultClient,n),t.next=6,e.$router.push("/chats");case 6:case"end":return t.stop()}}),t)})))()},getToken:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.query({query:B,variables:{username:e.username,password:e.password}});case 2:return n=t.sent,t.abrupt("return",n.data.login);case 4:case"end":return t.stop()}}),t)})))()},checkUser:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.query({query:Q,variables:{username:e.username}});case 2:return n=t.sent,t.abrupt("return",n.data.user);case 4:case"end":return t.stop()}}),t)})))()},register:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.confirmPassword.length&&0!==e.password.length&&e.password===e.confirmPassword){t.next=4;break}return e.errorMes="Incorrect password input",console.log("Incorrect password input."),t.abrupt("return");case 4:return t.next=6,e.checkUser();case 6:if(!t.sent){t.next=9;break}return console.log("User with such username already exists."),t.abrupt("return");case 9:return t.next=11,e.$apollo.query({query:K,variables:{username:e.username,password:e.password}});case 11:return t.next=13,e.getToken();case 13:return n=t.sent,P(e.$apollo.provider.defaultClient,n),t.next=17,e.$router.push("/chats");case 17:case"end":return t.stop()}}),t)})))()}}},z=Y,F=(n("78bc"),Object(o["a"])(z,p,v,!1,null,"55d7c6f3",null)),X=F.exports,Z={name:"Home",components:{Login:X}},ee=Z,te=(n("d44d"),Object(o["a"])(ee,l,d,!1,null,null,null)),ne=te.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Chat")},ae=[],se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"supermain"},[e._m(0),n("div",{staticClass:"main"},[e.messagesShown?e._e():n("div",{staticClass:"chatsContainer"},[n("div",{staticClass:"left-side"},[e.messagesShown?e._e():n("div",{staticClass:"somebut"},[n("div",{attrs:{id:"create"}},[n("button",{staticClass:"button-new-chat",on:{click:e.openWindow}},[e._v(" Create New ")])]),n("div",{attrs:{id:"log"}},[n("button",{staticClass:"button-new-chat",on:{click:e.logOut}},[e._v(" Log out ")])])]),n("div",{staticClass:"chats"},e._l(e.rooms,(function(t){return n("div",{key:t.id,staticClass:"chat"},[n("button",{class:{"button-owner-chat":t.owner.id===e.me.id},attrs:{id:t.id},on:{click:e.enterChat}},[e._v(" "+e._s(t.name)+" ")])])})),0)]),n("div",{staticClass:"noMessages"},[e._v(" No messages here yet... ")])]),e.messagesShown?n("div",{staticClass:"roomname"},[e._v(" "+e._s(e.chat.name)+" ")]):e._e(),e.messagesShown?n("div",{staticClass:"messagesContainer"},[n("div",{staticClass:"second"},[n("div",{staticClass:"allmembers"},e._l(this.members,(function(t){return n("div",{key:t.id},[e._v(" "+e._s(t.username)+" "),t.id===e.me.id?n("span",{staticClass:"span-me"},[e._v("(me)")]):e._e()])})),0),n("div",{staticClass:"third"},[n("div",[n("button",{on:{click:e.leaveChat}},[e._v(" Leave ")])]),n("div",{staticClass:"div-button-delete-container"},[e.isChatOwner?n("button",{staticClass:"button-delete-chat",on:{click:e.deleteChat}},[e._v("Delete chat")]):e._e()]),n("div",{staticClass:"div-button-update-container"},[e.isChatOwner?n("button",{staticClass:"button-update-chat",on:{click:e.updateChat}},[e._v("Update chat")]):e._e()])])]),n("div",{staticClass:"first"},[n("div",{staticClass:"messages"},e._l(this.chat.lastMessages,(function(t){return n("div",{key:t.id,staticClass:"onemess"},[n("div",{staticClass:"message",class:{"div-owner-message":t.author.id===e.me.id}},[n("div",{staticClass:"div-message-author"},[e._v(" "+e._s(t.author.username)+" ")]),n("div",{staticClass:"div-message-text"},[e._v(" "+e._s(t.text)+" ")]),n("div",{staticClass:"div-time"},[e._v(" "+e._s(t.timestamp.slice(11).split("").reverse().join("").slice(5).split("").reverse().join(""))+" ")])])])})),0),n("div",{staticClass:"div-enter-message"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"input-message",attrs:{placeholder:" . . ."},domProps:{value:e.newMessage},on:{input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),e._v(" "),n("button",{on:{click:e.createNewMessage}},[e._v("Send")])])])]):e._e()]),e.modalIsHidden?e._e():n("div",{staticClass:"div-modal-new"},[n("div",{staticClass:"div-centered-window"},[n("button",{staticClass:"button-cross",on:{click:e.closeModal}},[e._v("x")]),n("p",[e._v("Enter new chat name:")]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.roomName,expression:"roomName"}],attrs:{type:"text",placeholder:"New chat name:",required:"",minlength:"1"},domProps:{value:e.roomName},on:{input:function(t){t.target.composing||(e.roomName=t.target.value)}}}),n("button",{staticClass:"button-create-new-room",on:{click:e.createNewChat}},[e._v("Apply")])])])]),e.modalIsHidden2?e._e():n("div",{staticClass:"div-modal-new"},[n("div",{staticClass:"div-centered-window"},[n("button",{staticClass:"button-cross",on:{click:e.closeModal}},[e._v("x")]),n("p",[e._v("Enter new chat name:")]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.roomName2,expression:"roomName2"}],attrs:{type:"text",placeholder:"New chat name:",required:"",minlength:"1"},domProps:{value:e.roomName2},on:{input:function(t){t.target.composing||(e.roomName2=t.target.value)}}}),n("button",{staticClass:"button-create-new-room",on:{click:e.updateExistingChat}},[e._v("Update")])])])])])},oe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("span",{staticStyle:{"font-size":"24px"}},[e._v("лабараторная №6")])])}],ie=(n("d81d"),n("b0c0"),n("159b"),n("a434"),Object(f["a"])(S||(S=Object(g["a"])(["query rooms {\n  rooms {\n    id\n    name\n    timestamp\n    owner {\n      id\n      username\n    }\n    lastMessages {\n      text\n      timestamp\n      author {\n        id\n        username\n      }\n    }\n    members {\n      id\n      username\n    }\n  }\n}"])))),ce=Object(f["a"])(q||(q=Object(g["a"])(["  query me {\n    me {\n      id\n      username\n      timestamp\n      rooms{\n        id\n        name\n      }\n      currentRoom {\n        id\n        name\n        owner {\n          id\n          username\n        }\n        members{\n            id\n            username\n          }\n        lastMessages{\n          id\n          timestamp\n\n          author{\n            id\n            username\n          }\n          text\n        }\n      }\n    }\n}"]))),ue=Object(f["a"])(I||(I=Object(g["a"])(["mutation join($id:ID!) {\n  joinRoom(roomId: $id) {\n    id\n    name\n    timestamp\n    lastMessages {\n      text\n      timestamp\n      author {\n        id\n        username\n      }\n    }\n    owner {\n      id\n      username\n    }\n    members {\n      id\n      username\n    }\n  }\n}"]))),me=Object(f["a"])(L||(L=Object(g["a"])(["mutation leave {\n    leaveCurrentRoom {\n      id\n      name\n    }\n  }"]))),le=Object(f["a"])(M||(M=Object(g["a"])(["mutation join($text:String!) {\n  createMessage(text: $text) {\n    id\n    timestamp\n    author {\n      id\n      username\n    }\n    text\n  }\n}"]))),de=Object(f["a"])(A||(A=Object(g["a"])(["mutation createRoom($roomName:String!) {\n  createRoom(name: $roomName) {\n    id\n    name\n    timestamp\n    owner {\n      id\n      username\n    }\n  }\n}"]))),pe=Object(f["a"])(U||(U=Object(g["a"])(["mutation updateRoom($name:String!,$id:ID!) {\n  updateRoom(id: $id, name: $name) {\n    id\n    name\n    timestamp\n    owner {\n      id\n      username\n    }\n  }\n}"]))),ve=Object(f["a"])(H||(H=Object(g["a"])(["mutation deleteRoom($id:ID!) {\n  deleteRoom(id: $id) {\n    id\n    name\n    timestamp\n    owner {\n      id\n      username\n    }\n  }\n}"]))),he=Object(f["a"])(D||(D=Object(g["a"])(["subscription messageCreated {\n  messageCreated {\n    id\n    timestamp\n    author {\n      id\n      username\n    }\n    text\n  }\n}"]))),ge=Object(f["a"])(T||(T=Object(g["a"])(["subscription roomCreated {\n  roomCreated {\n    id\n    name\n    timestamp\n    owner {\n      id\n      username\n    }\n  }\n}"]))),fe=Object(f["a"])(V||(V=Object(g["a"])(["subscription roomUpdated {\n  roomUpdated {\n    id\n    name\n    timestamp\n    owner {\n      id\n      username\n    }\n    lastMessages {\n      text\n    }\n    members {\n      id\n      username\n    }\n  }\n}"]))),we=Object(f["a"])(G||(G=Object(g["a"])(["subscription roomDeleted {\n  roomDeleted {\n    id\n    name\n    timestamp\n    owner {\n      id\n      username\n    }\n  }\n}"]))),be=Object(f["a"])(J||(J=Object(g["a"])(["subscription memberJoined {\n  memberJoined {\n    id\n    username\n  }\n}"]))),_e=Object(f["a"])(W||(W=Object(g["a"])(["subscription memberLeft {\n  memberLeft {\n    id\n    username\n  }\n}"]))),Oe={name:"Chatings",data:function(){return{chat:{},rooms:[],messages:[],members:[],room:{},me:{},id:"",newMessage:"",modalIsHidden:!0,modalIsHidden2:!0,newChat:{},roomName:"",roomName2:"",isChatOwner:!1,hovered:!1,messagesShown:!1}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.query({query:ie});case 2:return n=t.sent,t.next=5,e.$apollo.query({query:ce});case 5:if(r=t.sent,e.me=r.data.me,!e.me.currentRoom){t.next=10;break}return t.next=10,e.loadLastChat(e.me);case 10:e.rooms=n.data.rooms;case 11:case"end":return t.stop()}}),t)})))()},methods:{joinRoom:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.mutate({fetchPolicy:"no-cache",mutation:ue,variables:{id:e.id}});case 2:return n=t.sent,t.abrupt("return",n.data.joinRoom);case 4:case"end":return t.stop()}}),t)})))()},enterChat:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.id=e.target.id,n.next=3,t.joinRoom();case 3:return t.chat=n.sent,t.members=t.chat.members,t.messagesShown=!0,t.isChatOwner=t.me.id===t.chat.owner.id,t.messages=t.chat.lastMessages,n.next=10,t.scrollDown();case 10:case"end":return n.stop()}}),n)})))()},leaveChat:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.messagesShown=!1,t.next=3,e.$apollo.mutate({fetchPolicy:"no-cache",mutation:me});case 3:case"end":return t.stop()}}),t)})))()},createNewMessage:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.mutate({fetchPolicy:"no-cache",mutation:le,variables:{text:e.newMessage}});case 2:return n=t.sent,e.newMessage="",console.log(n.data),t.abrupt("return",n.data);case 6:case"end":return t.stop()}}),t)})))()},openWindow:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.modalIsHidden=!1;case 1:case"end":return t.stop()}}),t)})))()},createNewChat:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.modalIsHidden=!0,t.next=3,e.$apollo.mutate({fetchPolicy:"no-cache",mutation:de,variables:{roomName:e.roomName}});case 3:return n=t.sent,console.log(n.data),t.abrupt("return",n.data);case 6:case"end":return t.stop()}}),t)})))()},closeModal:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.modalIsHidden=!0,e.modalIsHidden2=!0;case 2:case"end":return t.stop()}}),t)})))()},updateChat:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.modalIsHidden2=!1;case 1:case"end":return t.stop()}}),t)})))()},updateExistingChat:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.modalIsHidden2=!0,t.next=3,e.$apollo.mutate({fetchPolicy:"no-cache",mutation:pe,variables:{id:e.id,name:e.roomName2}});case 3:return n=t.sent,console.log(n.data),t.abrupt("return",n.data);case 6:case"end":return t.stop()}}),t)})))()},deleteChat:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.mutate({fetchPolicy:"no-cache",mutation:ve,variables:{id:e.id}});case 2:n=t.sent,e.mesIsHidden=!0,e.me.currentRoom=null,e.room=null,console.log(n.data);case 7:case"end":return t.stop()}}),t)})))()},logOut:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,E(e.$apollo.provider.defaultClient);case 2:return t.next=4,e.$apollo.provider.defaultClient.resetStore();case 4:return t.next=6,e.$router.push("/");case 6:case"end":return t.stop()}}),t)})))()},loadLastChat:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.id=e.currentRoom.id,t.chat=e.currentRoom,t.messages=t.chat.lastMessages,t.members=t.chat.members,t.messagesShown=!0,n.next=7,t.scrollDown();case 7:case"end":return n.stop()}}),n)})))()},scrollDown:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$nextTick((function(){var t=e.$el.querySelector(".messages");t.scrollTop=t.scrollHeight}));case 1:case"end":return t.stop()}}),t)})))()}},apollo:{$subscribe:{messageCreation:{query:he,result:function(e){var t=e.data;console.log(t.messageCreated),this.messages.push(t.messageCreated),this.scrollDown()}},roomCreation:{query:ge,result:function(e){var t=e.data;this.rooms.push(t.roomCreated)}},roomChange:{query:fe,result:function(e){var t=this,n=e.data;this.rooms=this.rooms.map((function(e){return e.id===n.roomUpdated.id&&(t.chat.name=n.roomUpdated.name),e}))}},roomDeletion:{query:we,result:function(e){var t=e.data;this.messagesShown=!1;var n=-1;this.rooms.forEach((function(e,r){return e.id===t.roomDeleted.id?n=r:""})),this.rooms.splice(n,1)}},joinedUser:{query:be,result:function(e){var t=e.data;console.log(t),this.members.push(t.memberJoined)}},leftUser:{query:_e,result:function(e){var t=e.data;console.log(t);var n=-1;this.members.forEach((function(e,r){return e.id===t.memberLeft.id?n=r:""})),this.members.splice(n,1)}}}}},xe=Oe,Ce=(n("dede"),Object(o["a"])(xe,se,oe,!1,null,"74127d3a",null)),je=Ce.exports,ye={components:{Chat:je}},Re=ye,ke=Object(o["a"])(Re,re,ae,!1,null,null,null),Pe=ke.exports;r["a"].use(m["a"]);var $e=[{path:"/",name:"Home",component:ne},{path:"/chats",name:"ChatRoom",component:Pe}],Ee=new m["a"]({mode:"history",base:"/",routes:$e}),Ne=Ee;r["a"].config.productionTip=!1,new r["a"]({router:Ne,apolloProvider:k(),render:function(e){return e(u)}}).$mount("#app")},"78bc":function(e,t,n){"use strict";n("d2c9")},"85ec":function(e,t,n){},d2c9:function(e,t,n){},d44d:function(e,t,n){"use strict";n("222d")},dede:function(e,t,n){"use strict";n("e531")},e531:function(e,t,n){}});
//# sourceMappingURL=app.8daa48a8.js.map